(set-logic SEPLOG)

(declare-sort Loc 0)

(declare-datatype Node1 ((node1 (next Loc) (prev Loc))))

(declare-datatype Node2 ((node2 (next Loc) (prev Loc) (down Loc))))

(define-fun-rec dll1_plus ((hd Loc) (pr Loc)) Bool
    (or (pto hd (node1 (as nil Loc) pr))
        (exists ((x Loc)) (sep (pto hd (node1 x pr)) (dll1_plus x hd))))
)

(define-fun-rec dllseg2_plus ((hd Loc) (pr Loc)
                              (tl Loc) (nx Loc)) Bool
    (or (exists ((down_hd Loc))
            (and (= hd tl)
                 (sep (pto hd (node2 nx pr down_hd))
                      (dll1_plus down_hd (as nil Loc)))))
        (exists ((x Loc) (down_hd Loc))
            (sep (pto hd (node2 x pr down_hd))
                 (dll1_plus down_hd (as nil Loc))
                 (dllseg2_plus x hd tl nx))))
)

(define-fun-rec dllseg2_plus_rev ((hd Loc) (pr Loc)
                                  (tl Loc) (nx Loc)) Bool
    (or (exists ((down_hd Loc))
            (and (= hd tl)
                 (sep (pto hd (node2 nx pr down_hd))
                      (dll1_plus down_hd (as nil Loc)))))
        (exists ((x Loc) (down_hd Loc))
            (sep (pto tl (node2 nx x down_hd))
                 (dll1_plus down_hd (as nil Loc))
                 (dllseg2_plus_rev hd pr x tl))))
)

(declare-const hd0 Loc)
(declare-const tl0 Loc)
(declare-const hd1 Loc)
(declare-const tl1 Loc)
(declare-const hd2 Loc)
(declare-const tl2 Loc)
(declare-const hd3 Loc)
(declare-const tl3 Loc)
(declare-const hd4 Loc)
(declare-const tl4 Loc)
(declare-const hd5 Loc)
(declare-const tl5 Loc)
(declare-const hd6 Loc)
(declare-const tl6 Loc)
(declare-const hd7 Loc)
(declare-const tl7 Loc)
(declare-const hd8 Loc)
(declare-const tl8 Loc)
(declare-const hd9 Loc)
(declare-const tl9 Loc)
(declare-const hd10 Loc)
(declare-const tl10 Loc)
(declare-const hd11 Loc)
(declare-const tl11 Loc)
(declare-const hd12 Loc)
(declare-const tl12 Loc)
(declare-const hd13 Loc)
(declare-const tl13 Loc)
(declare-const hd14 Loc)
(declare-const tl14 Loc)
(declare-const hd15 Loc)
(declare-const tl15 Loc)
(declare-const hd16 Loc)
(declare-const tl16 Loc)
(declare-const hd17 Loc)
(declare-const tl17 Loc)
(declare-const hd18 Loc)
(declare-const tl18 Loc)
(declare-const hd19 Loc)
(declare-const tl19 Loc)
(declare-const hd20 Loc)
(declare-const tl20 Loc)

(assert (sep (dllseg2_plus hd0 (as nil Loc) tl0 hd1)
             (dllseg2_plus hd1 hd0 tl1 hd2)
             (dllseg2_plus hd2 hd1 tl2 hd3)
             (dllseg2_plus hd3 hd2 tl3 hd4)
             (dllseg2_plus hd4 hd3 tl4 hd5)
             (dllseg2_plus hd5 hd4 tl5 hd6)
             (dllseg2_plus hd6 hd5 tl6 hd7)
             (dllseg2_plus hd7 hd6 tl7 hd8)
             (dllseg2_plus hd8 hd7 tl8 hd9)
             (dllseg2_plus hd9 hd8 tl9 hd10)
             (dllseg2_plus hd10 hd9 tl10 hd11)
             (dllseg2_plus hd11 hd10 tl11 hd12)
             (dllseg2_plus hd12 hd11 tl12 hd13)
             (dllseg2_plus hd13 hd12 tl13 hd14)
             (dllseg2_plus hd14 hd13 tl14 hd15)
             (dllseg2_plus hd15 hd14 tl15 hd16)
             (dllseg2_plus hd16 hd15 tl16 hd17)
             (dllseg2_plus hd17 hd16 tl17 hd18)
             (dllseg2_plus hd18 hd17 tl18 hd19)
             (dllseg2_plus hd19 hd18 tl19 hd20)
             (dllseg2_plus hd20 hd19 tl20 (as nil Loc))
        )
)

(assert (not (sep (dllseg2_plus_rev hd0 (as nil Loc) tl0 hd1)
                  (dllseg2_plus_rev hd1 hd0 tl1 hd2)
                  (dllseg2_plus_rev hd2 hd1 tl2 hd3)
                  (dllseg2_plus_rev hd3 hd2 tl3 hd4)
                  (dllseg2_plus_rev hd4 hd3 tl4 hd5)
                  (dllseg2_plus_rev hd5 hd4 tl5 hd6)
                  (dllseg2_plus_rev hd6 hd5 tl6 hd7)
                  (dllseg2_plus_rev hd7 hd6 tl7 hd8)
                  (dllseg2_plus_rev hd8 hd7 tl8 hd9)
                  (dllseg2_plus_rev hd9 hd8 tl9 hd10)
                  (dllseg2_plus_rev hd10 hd9 tl10 hd11)
                  (dllseg2_plus_rev hd11 hd10 tl11 hd12)
                  (dllseg2_plus_rev hd12 hd11 tl12 hd13)
                  (dllseg2_plus_rev hd13 hd12 tl13 hd14)
                  (dllseg2_plus_rev hd14 hd13 tl14 hd15)
                  (dllseg2_plus_rev hd15 hd14 tl15 hd16)
                  (dllseg2_plus_rev hd16 hd15 tl16 hd17)
                  (dllseg2_plus_rev hd17 hd16 tl17 hd18)
                  (dllseg2_plus_rev hd18 hd17 tl18 hd19)
                  (dllseg2_plus_rev hd19 hd18 tl19 hd20)
                  (dllseg2_plus_rev hd20 hd19 tl20 (as nil Loc)))
        )
)

(check-sat)